<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8"> <!-- Specifies the character encoding for the document (UTF-8) -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Ensures the webpage is responsive on all devices -->
    <title>Document</title> <!-- Title of the document shown in the browser tab -->

    <!-- bs css -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css">
    <!-- Bootstrap 4.5.3 CSS is included for styling and responsive design -->

    <!-- fa css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <!-- Font Awesome CSS is included to provide icon support -->

    <!-- custom css -->
    <link rel="stylesheet" href="style.css"> <!-- Custom CSS file for additional styling -->
</head>

<body>

    <div class="header wrapper text-center">
        <h1>
            <%= title %> <!-- Dynamically renders the "title" variable passed from the server using EJS templating -->
        </h1>
    </div>

    <div class="wrapper add-expense-form">
        <form action="/" method="post">
            <!-- Form for adding new expenses; data is sent to the root route ("/") using POST method -->
            <div class="form-group">
                <input type="text" name="expense_name" class="form-control" placeholder="Enter Expense Name...">
                <!-- Text input field for entering the name of the expense, styled using Bootstrap classes -->
            </div>
            <div class="form-group">
                <input type="number" name="expense_amount" class="form-control" placeholder="Enter Expense Amount...">
                <!-- Number input field for entering the amount of the expense, styled with Bootstrap -->
            </div>
            <button class="btn btn-block btn-outline-dark">Add Task</button>
            <!-- Submit button to add the expense, styled with Bootstrap -->
        </form>
    </div>

    <div class="expenses wrapper">
        <% if (typeof expenses===typeof []){ %>
            <!-- EJS block to check if the "expenses" variable is an array (i.e., there are expenses to display) -->

            <% expenses.forEach((expense , index)=> { %>
                <!-- Iterating over each expense in the "expenses" array using EJS's forEach loop -->
                <div class="expense">
                    <div class="expense_name">
                        <%= expense.name %> <!-- Dynamically displays the name of the expense -->
                    </div>
                    <div class="expense_amount">
                        <%= expense.amount %> <!-- Dynamically displays the amount of the expense -->
                    </div>
                    <a href="/delete/<%= expense._id %>" class="btn btn-dark delete">
                        <!-- Link to delete the expense by its index, with a trash icon -->
                        <i class="fa-solid fa-trash"></i> <!-- Font Awesome trash icon for the delete button -->
                    </a>
                </div>

                <% }); %> <!-- End of the forEach loop -->

                    <% }else {%>
                        <!-- EJS else block: if "expenses" is not an array (i.e., no expenses found), show a message -->
                        <p>No Expenses Found</p> <!-- Displays this message if there are no expenses -->
                        <% } %> <!-- End of if-else block -->
    </div>

</body>

</html>